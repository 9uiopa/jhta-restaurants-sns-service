<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jhta.restaurants_service.mapper.StoreDao">

	<insert id="insertStore" parameterType="kr.co.jhta.restaurants_service.vo.Store">
		insert into STORES
			(
			{STORE_BUSINESS_LICENSE},{STORE_ADDRESS},{STORE_CATEGORY},
			{STORE_ZIPCODE},{STORE_LATITUDE},{STORE_LONGITUDE},
			{STORE_TEXT},{STORE_PHONE},{OWNER_ID}
			)
		values
			(
			#{businessLicense},#{address},#{category},
			#{zipcode},#{latitude},#{longitude},
			#{text},#{phone},#{owner.id}
			)
	</insert>

	<select id = "getAllStores" resultType="kr.co.jhta.restaurants_service.vo.Store">
		select 
			ID							as id
			STORE_BUSINESS_LICENSE		as businessLicense,
			STORE_ADDRESS				as address,
			STORE_CATEGORY				as category,
			STORE_ZIPCODE				as zipcode,
			STORE_LATITUDE				as latitude,
			STORE_LONGITUDE				as longitude,
			STORE_TEXT					as text,
			STORE_PHONE	as phone,		as phone
			STORE_READ_COUNT			as readCount,
			STORE_CREATE_DATE			as createDate,
			STORE_UPDATE_DATE			as updateDate,
			OWNER_ID					as "owner.id",
			STORE_DISABLED				as disabled,
			SUBSCRIBED					as subscription
		from 
			STORES
	</select>
	
	<select id="getTotalRows" parameterType="map" resultType="int">
		select count(*)
		from STORES
	</select>
</mapper>