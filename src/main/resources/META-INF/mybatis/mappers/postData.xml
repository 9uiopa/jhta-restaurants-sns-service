<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jhta.restaurants_service.mapper.PostDataMapper">
	<insert id="insertPostData" parameterType="PostData">
	    INSERT INTO POST_DATA
	    	(post_id, store_id, content, picture_file, customer_id, createDate)
	    VALUES 
	    	(#{post.id}, #{store.id}, #{content}, #{pictureFile}, #{user.id}, #{createDate})
	</insert>
	
	<select id="getPostDataByPostId" parameterType="int" resultType="PostData">
		select 
			A.id as id,
			A.post_id as "post.id",
			A.store_id as "store.id",
			A.content as content,
			A.picture_file as pictureFile,
			B.name as "store.name", 
			B.address as "store.address"
		from POST_DATA A, STORES B
		where post_id = #{value}
		and A.store_id = B.id
	</select>
</mapper>